from utils import time_delta
from collections import OrderedDict
from sqlite3_operate import SQLite

def cve_day(today_time=''):
    """
    每日新增cve
    """
    so = SQLite("../data/nvd.db")
    today=time_delta(delta=0,format="%Y-%m-%d")
    sql="select CVE_Items_cve_CVE_data_meta_ID,CVE_Items_publishedDate,CVE_Items_cve_description_description_data_value from nvd_cve where CVE_Items_publishedDate like '%{time}%'".format(time=today)
    r=so.query(sql)
    od = OrderedDict()
    for i in r:
        od[i[0]]=(i[0],i[1],i[2])

    return od

if __name__ == '__main__':
	print(cve_day().values())
